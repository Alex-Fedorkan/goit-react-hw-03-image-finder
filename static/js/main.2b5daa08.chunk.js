(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{12:function(e,t,a){e.exports={item:"ImageGalleryItem_item__3C3pU",image:"ImageGalleryItem_image__1W6mm"}},13:function(e,t,a){e.exports={overlay:"Modal_overlay__B1Xay",modal:"Modal_modal__35upx"}},15:function(e,t,a){e.exports={list:"ImageGallery_list__2cYjy"}},16:function(e,t,a){e.exports={btn:"Button_btn__7fK2C"}},23:function(e,t,a){},24:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),o=a.n(n),c=a(5),s=a.n(c),i=(a(22),a(23),a(3)),u=a(4),l=a(7),h=a(6),m=a(8),d=(a(24),a(25),a(9)),b=a.n(d),p=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.handleQueryChange=function(t){e.setState({searchQuery:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){if(t.preventDefault(),""===e.state.searchQuery.trim())return m.b.error("Enter your query"),void e.props.onSubmit(e.state.searchQuery);e.props.onSubmit(e.state.searchQuery)},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(r.jsx)("header",{className:b.a.header,children:Object(r.jsxs)("form",{className:b.a.form,onSubmit:this.handleSubmit,children:[Object(r.jsx)("button",{type:"submit",className:b.a.button,children:Object(r.jsx)("span",{className:b.a.label,children:"Search"})}),Object(r.jsx)("input",{className:b.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchQuery,onChange:this.handleQueryChange})]})})}}]),a}(n.Component),f=a(10),g=function(){function e(){Object(i.a)(this,e),this.searchQuery="",this.page=1}return Object(u.a)(e,[{key:"fetchImages",value:function(){var e="".concat("https://pixabay.com/api/","?q=").concat(this.searchQuery,"&page=").concat(this.page,"&key=").concat("19016514-f636b8f63ee9a8d1bcb803743","&image_type=photo&orientation=horizontal&per_page=12");return fetch(e).then((function(e){return e.ok?e.json():Promise.reject(new Error("Bad request!"))}))}},{key:"resetPage",value:function(){this.page=1}},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"pageNum",get:function(){return this.page},set:function(e){this.page=e}}]),e}(),j=a(14),y=a.n(j),O=(a(47),function(){return Object(r.jsx)(y.a,{type:"Hearts",color:"#00BFFF",height:80,width:80,style:{marginLeft:"auto",marginRight:"auto"}})}),v=a(15),S=a.n(v),k=a(12),_=a.n(k),x=function(e){var t=e.webformatURL,a=e.largeImageURL,n=e.alt,o=e.onClick;return Object(r.jsx)("li",{className:_.a.item,children:Object(r.jsx)("img",{src:t,alt:n,className:_.a.image,"data-src":a,onClick:o})})},w=function(e){var t=e.images,a=e.onClick;return Object(r.jsx)("ul",{className:S.a.list,children:t.map((function(e){var t=e.id,n=e.webformatURL,o=e.largeImageURL,c=e.tags;return Object(r.jsx)(x,{webformatURL:n,largeImageURL:o,alt:c,onClick:a},t)}))})},C=a(16),Q=a.n(C),I=function(e){var t=e.onClick;return Object(r.jsx)("button",{className:Q.a.btn,type:"button",onClick:t,children:"Load more"})},L=a(13),N=a.n(L),M=document.querySelector("#modal-root"),U=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(r.jsx)("div",{className:N.a.overlay,onClick:this.handleBackdropClick,children:Object(r.jsx)("div",{className:N.a.modal,children:Object(r.jsx)("img",{src:this.props.imgURL,alt:this.props.alt})})}),M)}}]),a}(n.Component),R=new g,E="idle",F="pending",B="resolved",q="rejected",D=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={images:[],error:null,status:E,showModal:!1,largeImageURL:"",alt:"",loaderStatus:!1},e.loadMoreClick=function(){e.setState({loaderStatus:!0}),R.pageNum+=1,R.fetchImages().then((function(t){return e.setState((function(e){return{images:[].concat(Object(f.a)(e.images),Object(f.a)(t.hits))}}))})).catch((function(t){return e.setState({error:t,status:q})})).finally((function(){e.setState({loaderStatus:!1}),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.handleImageClick=function(t){e.setState((function(e){return{showModal:!e.showModal,largeImageURL:t.target.dataset.src,alt:t.target.alt}}))},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;if(e.searchQuery!==this.props.searchQuery){if(""===this.props.searchQuery.trim())return this.setState({status:E});this.setState({images:[],status:F}),R.resetPage(),R.query=this.props.searchQuery,R.fetchImages().then((function(e){return e.total?a.setState((function(t){return{images:[].concat(Object(f.a)(t.images),Object(f.a)(e.hits)),status:B}})):Promise.reject(new Error("No match found!"))})).catch((function(e){return a.setState({error:e,status:q})}))}}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.error,n=e.status,o=e.loaderStatus;return"idle"===n?null:"pending"!==n||t.length?"rejected"===n?(m.b.error(a.message),null):"resolved"===n?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w,{images:t,onClick:this.handleImageClick}),o&&Object(r.jsx)(O,{}),Object(r.jsx)(I,{onClick:this.loadMoreClick}),this.state.showModal&&Object(r.jsx)(U,{imgURL:this.state.largeImageURL,alt:this.state.alt,onClose:this.toggleModal})]}):void 0:Object(r.jsx)(O,{})}}]),a}(n.Component),K=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.handleFormSubmit=function(t){e.setState({searchQuery:t})},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(p,{onSubmit:this.handleFormSubmit}),Object(r.jsx)(D,{searchQuery:this.state.searchQuery}),Object(r.jsx)(m.a,{})]})}}]),a}(n.Component);s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={header:"Searchbar_header__kKJFm",form:"Searchbar_form__1osKS",button:"Searchbar_button__1IzlS",label:"Searchbar_label__3QHS4",input:"Searchbar_input__1Pi4p"}}},[[48,1,2]]]);
//# sourceMappingURL=main.2b5daa08.chunk.js.map